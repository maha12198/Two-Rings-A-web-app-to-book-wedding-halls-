@using System.Security.Claims
@using Final_Project.Data
@using Microsoft.EntityFrameworkCore
@model Final_Project.Models.ViewModels.HallVM
@inject ApplicationDbContext context

@{
    ViewData["Title"] = "HallDetails";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="container">
    <main role="main" class="pb-3">
    <br />
    <br />
    <br />
    <br />

    <h1>Hall Details</h1>




 <div class="container">
        <div class="row">
            <!--left-->
            <div class="col-md-6">
                <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                   <ol class="carousel-indicators">

                        @for (int i = 0; i < Model.Gallery.Count(); i++)
                        {
                            <li data-target="#carouselExampleIndicators" data-slide-to="@i" class="@(i==0 ? "active" : "") "></li>
                        }
                    </ol>
                    <div class="carousel-inner">
                        @for (int i = 0; i < Model.Gallery.Count(); i++)
                        {
                            <div class="@(i==0 ? "carousel-item active" : "carousel-item") ">
                                <img class="d-block w-100" src="@Model.Gallery[i].URL" alt="@Model.Gallery[i].Name">
                            </div>
                        }
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div> 
            <!--end of left-->

            <!--right-->
            <div class="col-md-6">
                <div class="row">
                    <div class="col-md-12">
                        <h1>@Model.Name</h1>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 text-primary">
                        <span class="label label-primary">location: </span>
                        <span class="monospaced">@Model.Location</span>
                    </div>
                </div>

                  <div class="row">
                    <div class="col-md-12 text-primary">
                        <span class="label label-primary">Managed By: </span>
                         <span class="monospaced">@Model.mangerName</span>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 text-primary">
                        <span class="label label-primary">Phone </span>
                         <span class="monospaced">@Model.phone</span>
                    </div>
                </div>
                  <div class="row">
                    <div class="col-md-12 text-primary">
                        <span class="label label-primary">Price: </span>
                        <span class="monospaced">@Model.Price</span>
                    </div>
                </div>
                    
            </div>
            <!--end of right-->
        </div>
  </div>




      <!------------------------new card design------------------------>
            <br />
            <br/>

            @{ var HallPakedg1 = context.HallPackages.Where(u=>u.Id == u.HallId);}
            @if (HallPakedg1.Count() == 0)
            {
                <br />
                <h1 style="text-align:center">
                No packages assigned for this hall yet
                </h1>
            }
            else
            {
                var userid = User.FindFirstValue(ClaimTypes.NameIdentifier);
                var HallPakedg = context.HallPackages.Where(u=>u.Id == u.HallId);
                var backages = context.HallPackages.Where(h => h.HallId == h.Id).Include(h => h.Hall);
            <!------------------------The Card------------------------>
                    <div class="row row-cols-1 row-cols-md-2 g-4">
                            @foreach (var item in ViewBag.backages) 
                            {
                            <div class="col ">
                                <div class="card ">
                                           
                                    <div class="card-body">
                                        <h4 class="card-title">Pakedge: @item.Name</h4>
                                            <p class="card-text">Number Of Persons: @item.NumberOfPersons</p>
                                            <p class="card-text">Price: @item.price L.E </p>
                                                        @if (item.cake)
                                                        {
                                                            <p>Cake: Yes</p> 
                                                        }
                                                        else
                                                        {
                                                                <p>Cake: No</p> 
                                                        }
                                                        @if (item.food)
                                                        {
                                                                <p>Food: Yes</p> 
                                                        }
                                                        else
                                                        {
                                                                <p>Food: No</p> 
                                                        }
                                    </div>
                                </div> 
                            </div>
                            } 
                    </div>
                    }
      <!------------------------End of new card design------------------------>




      </main>
</div>
